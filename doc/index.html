

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>caproto: a pure-Python Channel Access protocol library &mdash; caproto 0+untagged.316.gf441d58 documentation</title>
  

  
  
  
  

  

  
  
    

  

  
  
    <link rel="stylesheet" href="_static/css/theme.css" type="text/css" />
  

  

  
        <link rel="index" title="Index"
              href="genindex.html"/>
        <link rel="search" title="Search" href="search.html"/>
    <link rel="top" title="caproto 0+untagged.316.gf441d58 documentation" href="#"/>
        <link rel="next" title="Getting Started: Writing Your Own Channel Access Client" href="basics.html"/> 

  
  <script src="_static/js/modernizr.min.js"></script>

</head>

<body class="wy-body-for-nav" role="document">

   
  <div class="wy-grid-for-nav">

    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search">
          

          
            <a href="#" class="icon icon-home"> caproto
          

          
          </a>

          
            
            
              <div class="version">
                0+untagged.316.gf441d58
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Getting Started: Writing Your Own Channel Access Client</a></li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a></li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" role="navigation" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="#">caproto</a>
        
      </nav>


      
      <div class="wy-nav-content">
        <div class="rst-content">
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="#">Docs</a> &raquo;</li>
        
      <li>caproto: a pure-Python Channel Access protocol library</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="_sources/index.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="caproto-a-pure-python-channel-access-protocol-library">
<h1>caproto: a pure-Python Channel Access protocol library<a class="headerlink" href="#caproto-a-pure-python-channel-access-protocol-library" title="Permalink to this headline">¶</a></h1>
<p>This is a &#8220;bring your own I/O&#8221; implementation of the
<a class="reference external" href="http://www.aps.anl.gov/epics/">EPICS</a> Channel Access protocol in
Python.</p>
<p>This project is inspired by the broad effort in the Python community to write
<a class="reference external" href="http://sans-io.readthedocs.io/">sans-I/O implementations of network protocols</a>.
Caproto parses and validates incoming and outgoing bytes, keeping track
the state of an EPICS Client, Server, Virtual Circuits, and Channels. But,
crucially, it performs no I/O itself: handling sockets and transport is
completely up the caller. Caproto is a toolkit for building programs that speak
EPICS.</p>
<div class="section" id="why-do-this">
<h2>Why do this?<a class="headerlink" href="#why-do-this" title="Permalink to this headline">¶</a></h2>
<p>The aim is to provide a complete, reusable implementation of the Channel Access
protocol in Python which can be wrapped in whichever network library you like
best. It is not a replacement for
<a class="reference external" href="https://github.com/pyepics/pyepics">pyepics</a>,
<a class="reference external" href="http://controls.diamond.ac.uk/downloads/python/cothread/">cothread</a>, or
<a class="reference external" href="https://pcaspy.readthedocs.io">pcaspy</a>. It&#8217;s a pure-Python implementation
of <em>libca</em> that makes libraries like these easier to write in the
future. See the <a class="reference external" href="http://sans-io.readthedocs.io/">sans-I/O documentation</a> for
more on the why and how of this idea and for a list of related projects.</p>
<p>This entire implementation, including copious docstrings and comments, is
shorter than official webpage documenting the Channel Access specification. The
codebase itself may serve as useful introduction to Channel Access concepts.</p>
</div>
<div class="section" id="vital-statistics">
<h2>Vital Statistics<a class="headerlink" href="#vital-statistics" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>Requirements: Python 3.5+ and (optional) numpy</li>
<li>License: 3-clause BSD</li>
</ul>
</div>
<div class="section" id="how-do-you-know-it-works">
<h2>How do you know it works?<a class="headerlink" href="#how-do-you-know-it-works" title="Permalink to this headline">¶</a></h2>
<ul class="simple">
<li>It can talk to libca as a client &#8212; for example, reading, writing to, and
monitoring the simulated motor ioc, motorsim.</li>
<li>It can talk to libca as a server &#8212; for example, responding correctly to
caget, caput, camonitor.</li>
<li>The Python module that specifies the byte layout of each command is generated
using Python and Jinja templates from the documentation itself to reduce
the potential for bugs introduced by human transcription. Where we
found errors in the documentation, we fixed them and submitted a patch
upstream. (NOTE: This is a reminder to submit a patch.)</li>
<li>It passes the server test spec <a class="reference external" href="https://github.com/mdavidsaver/catvs">https://github.com/mdavidsaver/catvs</a> (NOTE: As
of this writing, this is not true! It&#8217;s here as a reminder to make it true
before we publish this documentation.)</li>
<li>The byte sizes of the DBR types compare exactly to those in pyepics.</li>
</ul>
</div>
<div class="section" id="so-should-i-use-it">
<h2>So should I use it?<a class="headerlink" href="#so-should-i-use-it" title="Permalink to this headline">¶</a></h2>
<p>That depends. Probably not. It&#8217;s a very young project, and the primary author
(hi!) is fairly new to EPICS. For important work, one of the more battle-tested
projects linked above would be a better choice.</p>
<p>But by all means, take it for a test drive. Use it to understand EPICS better
or to play with the growing family of asynchronous libraries in Python.</p>
</div>
<div class="section" id="how-s-the-performance">
<h2>How&#8217;s the performance?<a class="headerlink" href="#how-s-the-performance" title="Permalink to this headline">¶</a></h2>
<p>No idea yet! That&#8217;s high on the list of things we&#8217;d like to know. Caproto gets
some important basics right, like reading bytes directly from sockets into C
structs with no extra copies. Time will tell if there are any major
bottlenecks we haven&#8217;t anticipated.</p>
</div>
<div class="section" id="acknowledgement">
<h2>Acknowledgement<a class="headerlink" href="#acknowledgement" title="Permalink to this headline">¶</a></h2>
<p>The design of this library was inspired by
<a class="reference external" href="https://h11.readthedocs.io/">h11</a>, to which caproto owes its core design
principles and many of its clever tricks. h11 is distributed under an MIT
license.</p>
<p>And of course many resources from the EPICS developer community were
indispensible. See <a class="reference internal" href="references.html"><span class="doc">References</span></a>.</p>
<div class="toctree-wrapper compound">
<ul>
<li class="toctree-l1"><a class="reference internal" href="basics.html">Getting Started: Writing Your Own Channel Access Client</a><ul>
<li class="toctree-l2"><a class="reference internal" href="basics.html#channel-access-basics">Channel Access Basics</a></li>
<li class="toctree-l2"><a class="reference internal" href="basics.html#simplify-bookkeepinig-with-channels">Simplify Bookkeepinig with Channels</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="api.html">API Documentation</a><ul>
<li class="toctree-l2"><a class="reference internal" href="api.html#commands">Commands</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-state-machine">The State Machine</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#special-constants">Special Constants</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-virtualcircuit-object">The VirtualCircuit object</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#the-broadcaster-object">The Broadcaster object</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#channel-objects">Channel objects</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#payload-data-types">Payload Data Types</a></li>
<li class="toctree-l2"><a class="reference internal" href="api.html#exceptions">Exceptions</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="examples/index.html">Examples</a><ul>
<li class="toctree-l2"><a class="reference internal" href="examples/synchronous_client.html">Simple client that reads, subscribes, writes, and shuts down</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/singleshot_server.html">Simple server that responds to one &#8216;caget&#8217; and shuts down</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/curio_client.html">Fairly complete client using curio for async I/O</a></li>
<li class="toctree-l2"><a class="reference internal" href="examples/curio_server.html">Fairly complete server using curio for async I/O</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="references.html">References</a></li>
<li class="toctree-l1"><a class="reference internal" href="release-notes.html">Release Notes</a></li>
</ul>
</div>
</div>
</div>


           </div>
           <div class="articleComments">
            
           </div>
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="basics.html" class="btn btn-neutral float-right" title="Getting Started: Writing Your Own Channel Access Client" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright 2017, Daniel Allan.

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/snide/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  

    <script type="text/javascript">
        var DOCUMENTATION_OPTIONS = {
            URL_ROOT:'./',
            VERSION:'0+untagged.316.gf441d58',
            COLLAPSE_INDEX:false,
            FILE_SUFFIX:'.html',
            HAS_SOURCE:  true,
            SOURCELINK_SUFFIX: '.txt'
        };
    </script>
      <script type="text/javascript" src="_static/jquery.js"></script>
      <script type="text/javascript" src="_static/underscore.js"></script>
      <script type="text/javascript" src="_static/doctools.js"></script>
      <script type="text/javascript" src="https://cdn.mathjax.org/mathjax/latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>

  

  
  
    <script type="text/javascript" src="_static/js/theme.js"></script>
  

  
  
  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.StickyNav.enable();
      });
  </script>
   

</body>
</html>